---
import GlassCard from "@holi/ui/components/GlassCard.astro";
import { getTranslations } from "../i18n/translations";

const lang = Astro.currentLocale || "en";
const t = getTranslations(lang);

// Tools data with updated aesthetic metadata
const tools = [
  {
    id: "paint",
    name: t.tool1_name || "paint",
    desc: t.tool1_desc || "High-performance drawing with WebGPU.",
    href: "https://paint.holi.tools",
    color: "#ef4444", // Red/Warm
    icon: `<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 19l7-7 3 3-7 7-3-3z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M2 2l7.586 7.586" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`,
    comingSoon: true,
  },
  {
    id: "labs",
    name: t.tool2_name || "labs",
    desc: t.tool2_desc || "Experimentation space and technical papers.",
    href: "https://labs.holi.tools",
    color: "#ec4899", // Pink/Cyber
    icon: `<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 2v7.31" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M14 2v7.31" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M8.5 2h7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M14 9.3a6.5 6.5 0 1 1-4 0" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`,
  },
  {
    id: "typst",
    name: t.tool3_name || "typst",
    desc: t.tool3_desc || "Advanced scientific-technical document editor.",
    href: "https://typst.holi.tools",
    color: "#0ea5e9", // Sky/Academic
    icon: `<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><polyline points="14 2 14 8 20 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><line x1="16" y1="13" x2="8" y2="13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><line x1="16" y1="17" x2="8" y2="17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><polyline points="10 9 9 9 8 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`,
    comingSoon: true,
  },
  {
    id: "calc",
    name: t.tool4_name || "calculator",
    desc: t.tool4_desc || "Complex calculations and instant visualization.",
    href: "https://calc.holi.tools",
    color: "#10b981", // Emerald/Tech
    icon: `<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="4" y="2" width="16" height="20" rx="2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><line x1="8" y1="6" x2="16" y2="6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><line x1="16" y1="14" x2="16" y2="18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M16 10h.01" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 10h.01" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 10h.01" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 14h.01" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 14h.01" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 18h.01" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 18h.01" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`,
    comingSoon: true,
  },
  {
    id: "qr",
    name: t.tool_qr_name || "qr",
    desc: t.tool_qr_desc || "Instant, private, and secure QR code generation.",
    href: "https://qr.holi.tools",
    color: "#8b5cf6", // Violet/Purple
    icon: `<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 3h6v6H3z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M15 3h6v6h-6z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M3 15h6v6H3z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M14 14h1v1h-1z" fill="currentColor"/><path d="M17 17h1v1h-1z" fill="currentColor"/><path d="M14 17h1v1h-1z" fill="currentColor"/><path d="M17 14h1v1h-1z" fill="currentColor"/><path d="M14 14h3v3h-3z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M20 14h1v6h-1z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M14 20h3v1h-3z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`,
  },
];
---

<main id="ToolsExplorer" class="tools-menu-section">
  <h2 class="sr-only">Applications</h2>
  <div class="tools-grid">
    {
      tools.map((tool) => (
        <GlassCard
          clickable
          href={tool.href}
          intensity={0.4}
          padding="lg"
          rounded="lg"
          class="tool-card group relative overflow-hidden"
          target="_blank"
          style={{ '--tool-color': tool.color }}
        >
          {/* Subtle Color Glow Background */}
          <div class="absolute inset-0 bg-[var(--tool-color)] opacity-0 group-hover:opacity-[0.03] transition-opacity duration-500 pointer-events-none" />
          
          {tool.comingSoon && (
            <div class="absolute top-3 right-3 z-20">
              <span class="px-2 py-1 text-[9px] font-bold uppercase tracking-wider text-white bg-[var(--tool-color)] rounded-md opacity-80 backdrop-blur-sm">
                {t.status_coming_soon || "Coming Soon"}
              </span>
            </div>
          )}
          
          <div class="tool-layout">
            <div class="tool-icon-box">
              <div class="tool-icon" set:html={tool.icon} />
            </div>

            <div class="tool-content">
              <h3 class="tool-name">
                {tool.name}
                <span class="external-arrow">â†—</span>
              </h3>
              <p class="tool-desc">{tool.desc}</p>
            </div>
          </div>
        </GlassCard>
      ))
    }
  </div>
</main>

<style>
  .tools-menu-section {
    width: 100%;
    padding: 0 1rem 8rem 1rem;
    display: flex;
    justify-content: center;
  }

  .tools-grid {
    display: grid;
    /* CHANGE: 2 Columns for Bento Look */
    grid-template-columns: repeat(2, 1fr);
    width: 100%;
    max-width: 900px;
    gap: 1.5rem; /* Increased gap */
  }

  /* Core Card Styles */
  :global(.tool-card) {
    height: auto; /* Let content dictate height */
    min-height: 0;
    display: flex !important;
    flex-direction: column !important;
    justify-content: flex-start !important;
    align-items: flex-start !important;
    text-align: left !important;
    padding: 1.25rem !important; /* Significantly reduced padding */
    border: 1px solid transparent;
  }

  /* Hover States - Pure Color Change only */
  :global(.tool-card:hover) {
     border-color: var(--tool-color, var(--color-accent)) !important;
     background: rgba(255, 255, 255, 0.03) !important;
  }

  .tool-layout {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 1rem; /* Tighter gap */
    width: 100%;
    z-index: 10;
  }

  /* Icon Box - Static */
  .tool-icon-box {
    width: 3rem; /* Smaller icon box 4rem -> 3rem */
    height: 3rem;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 10px; /* Adjusted radius */
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    color: var(--color-text);
    opacity: 0.8;
  }

  :global(.tool-card:hover) .tool-icon-box {
    opacity: 1;
    color: var(--tool-color);
    background: rgba(255,255,255, 0.05);
    border-color: var(--tool-color);
  }

  .tool-icon {
    width: 1.5rem; /* Smaller icon 2rem -> 1.5rem */
    height: 1.5rem;
  }

  .tool-icon :global(svg) {
    width: 100%;
    height: 100%;
    stroke-width: 1.5;
  }

  .tool-content {
    display: flex;
    flex-direction: column;
    gap: 0.1rem; /* Tighter text gap */
    flex: 1;
    min-width: 0; /* Prevent flex overflow */
  }

  .tool-name {
    font-size: 1.1rem; /* Smaller title 1.5rem -> 1.1rem */
    font-weight: 700;
    letter-spacing: -0.01em;
    color: var(--color-text);
    margin: 0;
    text-transform: lowercase;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    opacity: 1; /* Force full opacity */
  }

  .external-arrow {
    display: none; 
  }

  .tool-desc {
    font-size: 0.85rem; /* Smaller desc */
    line-height: 1.3;
    color: var(--color-text);
    opacity: 1; /* Force full opacity for Lighthouse */
    font-weight: 500;
    margin: 0;
    display: -webkit-box;
    -webkit-line-clamp: 2; /* Limit to 2 lines */
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  @media (max-width: 768px) {
    .tools-grid {
       grid-template-columns: 1fr; /* Stack on mobile/tablet portrait */
       gap: 0.75rem;
    }
  }
</style>
