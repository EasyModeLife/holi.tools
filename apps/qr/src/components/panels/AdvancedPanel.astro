---
import { getLangFromUrl, useTranslations } from "../../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

/**
 * AdvancedPanel.astro - Advanced configuration for QR Code
 *
 * Includes:
 * - Error Correction Level (ECC)
 * - Mask Pattern selection
 */
---

<div class="option-row">
  <label>{t("advanced.ecc")}</label>
  <select onchange="window.setEcc && window.setEcc(this.value)">
    <option value="L">{t("advanced.ecc.low")}</option>
    <option value="M" selected>{t("advanced.ecc.medium")}</option>
    <option value="Q">{t("advanced.ecc.quartile")}</option>
    <option value="H">{t("advanced.ecc.high")}</option>
  </select>
</div>
<div class="option-row">
  <label>{t("advanced.mask")}</label>
  <select
    id="mask-select"
    onchange="window.setMaskPattern && window.setMaskPattern(this.value)"
  >
    <option value="auto" selected>{t("advanced.mask.auto")}</option>
    <option value="0">(i+j) mod 2 = 0</option>
    <option value="1">i mod 2 = 0</option>
    <option value="2">j mod 3 = 0</option>
    <option value="3">(i+j) mod 3 = 0</option>
    <option value="4">(i÷2 + j÷3) mod 2 = 0</option>
    <option value="5">(i×j) mod 2 + (i×j) mod 3 = 0</option>
    <option value="6">((i×j) mod 2 + (i×j) mod 3) mod 2 = 0</option>
    <option value="7">((i+j) mod 2 + (i×j) mod 3) mod 2 = 0</option>
  </select>
</div>

<style>
  /* Advanced Panel Styles */
  .option-row {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .option-row > label:first-child {
    font-size: 12px;
    color: var(--text-muted, rgba(255, 255, 255, 0.6));
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  @media (prefers-color-scheme: dark) {
    .option-row > label:first-child {
      color: rgba(255, 255, 255, 0.6);
    }
  }

  .option-row select {
    padding: 10px 12px;
    background: rgba(127, 127, 127, 0.1);
    border: 1px solid rgba(127, 127, 127, 0.2);
    border-radius: 8px;
    color: var(--text-main, white);
    font-size: 14px;
    cursor: pointer;
  }

  @media (prefers-color-scheme: dark) {
    .option-row select {
      color: white;
    }
  }

  .option-row select option {
    background: var(--bg-card, #2a2a2f);
    color: var(--text-main, white);
    padding: 8px;
  }
</style>
