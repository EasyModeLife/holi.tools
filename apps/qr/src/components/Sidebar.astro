---
// Sidebar.astro - Collapsible left navigation panel
import { getLangFromUrl, useTranslations } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<aside class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <div class="logo">
      <div class="logo-mark"><span class="icon">qr_code_2</span></div>
      <span class="logo-text">Holi QR</span>
    </div>
    <button
      class="sidebar-toggle"
      onclick="toggleSidebar()"
      title={t("sidebar.toggle")}
    >
      <span class="icon">chevron_left</span>
    </button>
  </div>

  <nav class="nav-sec">
    <div class="nav-head">{t("sidebar.library")}</div>
    <a href="#" class="nav-item active" onclick="showCanvas()">
      <span class="icon">edit</span>
      <span class="nav-item-text">{t("sidebar.editor")}</span>
    </a>
    <a href="#" class="nav-item" onclick="showRecent()">
      <span class="icon">history</span>
      <span class="nav-item-text">{t("sidebar.recent")}</span>
    </a>
  </nav>

  <nav class="nav-sec">
    <div class="nav-head">
      {t("sidebar.collections")}
      <button onclick="createCollection()" style="float:right">
        <span class="icon" style="font-size:14px">add</span>
      </button>
    </div>
    <div id="collections-list"></div>
  </nav>

  <div style="flex:1"></div>

  <div
    style="display:flex; gap:8px; padding-top:12px; border-top:1px solid var(--border-main)"
  >
    <button
      class="nav-item"
      title={t("sidebar.theme")}
      style="flex:1; justify-content:center"
      onclick="toggleTheme()"
    >
      <span class="icon">dark_mode</span>
    </button>
  </div>
</aside>
